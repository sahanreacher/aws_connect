{
  "Version": "2019-10-30",
  "StartAction": "logging",
  "Metadata": {
    "entryPointPosition": {
      "x": -683.2,
      "y": -260
    },
    "ActionMetadata": {
      "logging": {
        "position": {
          "x": -655.2,
          "y": -96.8
        },
        "isFriendlyName": true
      },
      "ba86940c-9923-4059-862d-18379df883de": {
        "position": {
          "x": -194.4,
          "y": 400.8
        },
        "dynamicParams": []
      },
      "Set FSS_Call_Disposition-Welsh": {
        "position": {
          "x": 936.8,
          "y": -4.8
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "882e13d6-a627-4938-8640-cb6f58b5f125": {
        "position": {
          "x": 648,
          "y": 448.8
        }
      },
      "out of office hours": {
        "position": {
          "x": 41.6,
          "y": 398.4
        },
        "isFriendlyName": true
      },
      "Error message": {
        "position": {
          "x": -168,
          "y": 808
        },
        "isFriendlyName": true
      },
      "Set FSS_Call_Disposition-MainIVR_Opt2": {
        "position": {
          "x": 933.6,
          "y": -203.2
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Set FSS_Call_Disposition-Payments": {
        "position": {
          "x": 1812.8,
          "y": 706.4
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Set FSS_Call_Disposition-Default": {
        "position": {
          "x": 1812.8,
          "y": 896
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Set FSS_Call_Disposition-Packaging": {
        "position": {
          "x": 1812.8,
          "y": 517.6
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Set FSS_Call_Disposition-Account_Admin": {
        "position": {
          "x": 1810.4,
          "y": 327.2
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Option 2 - LPs": {
        "position": {
          "x": 1382.4,
          "y": 448.8
        },
        "isFriendlyName": true,
        "conditionMetadata": [
          {
            "id": "98aab031-008f-4340-bd80-80e9a76f6e6a",
            "value": "1"
          },
          {
            "id": "5df4a386-9a67-449b-9183-32a16daeda3a",
            "value": "2"
          },
          {
            "id": "c9dd44d3-e6c6-448b-8d16-309e6bec0e95",
            "value": "3"
          },
          {
            "id": "71bf8201-e724-4b3d-8436-943f86d574b7",
            "value": "4"
          }
        ]
      },
      "Set FSS_Call_Disposition": {
        "position": {
          "x": 929.6,
          "y": -418.4
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Payment Advice": {
        "position": {
          "x": 2225.6,
          "y": 792.8
        },
        "isFriendlyName": true
      },
      "General advice": {
        "position": {
          "x": 2231.2,
          "y": 981.6
        },
        "isFriendlyName": true
      },
      "Packaging Info advice": {
        "position": {
          "x": 2220.8,
          "y": 600
        },
        "isFriendlyName": true
      },
      "Account admin advice": {
        "position": {
          "x": 2216.8,
          "y": 412
        },
        "isFriendlyName": true
      },
      "Main IVR": {
        "position": {
          "x": 557.6,
          "y": -354.4
        },
        "isFriendlyName": true,
        "conditionMetadata": [
          {
            "id": "1b1c1a14-b505-444a-98b5-67eb20deb67f",
            "value": "1"
          },
          {
            "id": "95dc6de9-6521-4370-9b53-1f08028bfcba",
            "value": "2"
          },
          {
            "id": "97ad95c7-0344-4bb9-ab75-0ab565d1528e",
            "value": "3"
          }
        ]
      },
      "b3b50128-5b9c-40c6-a2f1-f636d46b2a02": {
        "position": {
          "x": -434.4,
          "y": -100
        },
        "parameters": {
          "HoursOfOperationId": {
            "displayName": "dev_connect_hoo_epr_fss_1"
          }
        },
        "Hours": {
          "id": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/operating-hours/b6b8e46d-7dcf-4574-b242-06a89e77cb27",
          "text": "dev_connect_hoo_epr_fss_1"
        }
      },
      "Fallback transfer to agent message": {
        "position": {
          "x": 2526.4,
          "y": -23.2
        },
        "isFriendlyName": true
      },
      "FSS Welcome": {
        "position": {
          "x": -187.2,
          "y": 145.6
        },
        "isFriendlyName": true
      },
      "Force compliance on lambda fail": {
        "position": {
          "x": 236,
          "y": 142.4
        },
        "isFriendlyName": true
      },
      "Check English Calls in Queue": {
        "position": {
          "x": 3380.8,
          "y": -21.6
        },
        "isFriendlyName": true,
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "40cd4bf9-d09c-4258-9310-924d71ca9ad2",
            "operator": {
              "name": "Is less or equal",
              "value": "LessThanOrEqualTo",
              "shortDisplay": "<="
            },
            "value": "30"
          }
        ]
      },
      "Check calls in Welsh queue": {
        "position": {
          "x": 3436,
          "y": 1620.8
        },
        "isFriendlyName": true,
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "ce7022fd-0f86-42de-998f-4a8edc4dc2db",
            "operator": {
              "name": "Is less or equal",
              "value": "LessThanOrEqualTo",
              "shortDisplay": "<="
            },
            "value": "10"
          }
        ]
      },
      "Set FFS Whisper flow": {
        "position": {
          "x": 4261.6,
          "y": 541.6
        },
        "isFriendlyName": true,
        "parameters": {
          "EventHooks": {
            "AgentWhisper": {
              "displayName": "defra-dev-connect-flow-AgentWhisper-001"
            }
          }
        },
        "contactFlow": {
          "text": "defra-dev-connect-flow-AgentWhisper-001",
          "id": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/contact-flow/1ba90de9-9b75-46ed-a807-002fb196ea4d"
        },
        "customerOrAgent": false
      },
      "Set FSS queue flow": {
        "position": {
          "x": 4487.2,
          "y": 536.8
        },
        "isFriendlyName": true,
        "parameters": {
          "EventHooks": {
            "CustomerQueue": {
              "displayName": "defra-dev-connect-flow-FSSCustQ-001"
            }
          }
        },
        "contactFlow": {
          "text": "defra-dev-connect-flow-FSSCustQ-001",
          "id": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/contact-flow/4704a449-dad3-4791-8165-376817029cae"
        },
        "customerOrAgent": true
      },
      "Excess_Calls_English": {
        "position": {
          "x": 3608.8,
          "y": 112.8
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Excess_Calls_Welsh": {
        "position": {
          "x": 3672.8,
          "y": 1747.2
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Too many calls in queue": {
        "position": {
          "x": 3969.6,
          "y": 731.2
        },
        "isFriendlyName": true
      },
      "welsh queue": {
        "position": {
          "x": 1220,
          "y": 1217.6
        },
        "isFriendlyName": true,
        "parameters": {
          "QueueId": {
            "displayName": "defra-dev-connect-queue-generalwelsh-001"
          }
        },
        "queue": {
          "text": "defra-dev-connect-queue-generalwelsh-001"
        }
      },
      "english queue": {
        "position": {
          "x": 2800,
          "y": -28
        },
        "isFriendlyName": true,
        "parameters": {
          "QueueId": {
            "displayName": "defra-dev-connect-queue-generalenglish-001"
          }
        },
        "queue": {
          "text": "defra-dev-connect-queue-generalenglish-001"
        }
      },
      "8cc941bc-32ce-43a3-b13e-d1ec3e3330c9": {
        "position": {
          "x": 3085.6,
          "y": -347.2
        }
      },
      "3d4c31a5-1ad4-441f-bcd8-dd63b396987f": {
        "position": {
          "x": 3095.2,
          "y": -100.8
        }
      },
      "b184ba3c-a10b-4fc9-9cdd-24fe99b565d4": {
        "position": {
          "x": 3034.4,
          "y": 1366.4
        }
      },
      "56505620-d29f-45a2-b7d7-6a8ae3960408": {
        "position": {
          "x": 3039.2,
          "y": 1619.2
        }
      },
      "05db0864-aa4f-41a1-8e10-791f327b4cb9": {
        "position": {
          "x": 4717.6,
          "y": 542.4
        }
      },
      "If lambda error": {
        "position": {
          "x": 5364,
          "y": 1056.8
        },
        "isFriendlyName": true
      },
      "7212db89-b817-46e5-80e5-90aeaa69a136": {
        "position": {
          "x": 5949.6,
          "y": 1000
        }
      },
      "Not Staffed": {
        "position": {
          "x": 5012,
          "y": 929.6
        },
        "isFriendlyName": true
      }
    },
    "Annotations": [],
    "name": "defra-dev-connect-flow-MainIVR-001",
    "description": "connect flow for main IVR defra",
    "type": "contactFlow",
    "status": "PUBLISHED",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "logging",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "b3b50128-5b9c-40c6-a2f1-f636d46b2a02"
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "MainIVR_Enter_Flow"
        },
        "TargetContact": "Current"
      },
      "Identifier": "ba86940c-9923-4059-862d-18379df883de",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "out of office hours",
        "Errors": [
          {
            "NextAction": "out of office hours",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Welsh"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set FSS_Call_Disposition-Welsh",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "welsh queue",
        "Errors": [
          {
            "NextAction": "welsh queue",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "882e13d6-a627-4938-8640-cb6f58b5f125",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Closed_Msg"
      },
      "Identifier": "out of office hours",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "882e13d6-a627-4938-8640-cb6f58b5f125",
        "Errors": [
          {
            "NextAction": "Error message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "We are sorry, there seems to be a problem and we are unable to take your call right now. You can find information about extended packaging responsibity at gov.uk. Otherwise, we thank you for your patience, and request you call back later."
      },
      "Identifier": "Error message",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "882e13d6-a627-4938-8640-cb6f58b5f125",
        "Errors": [
          {
            "NextAction": "882e13d6-a627-4938-8640-cb6f58b5f125",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "MainIVR_Opt2"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set FSS_Call_Disposition-MainIVR_Opt2",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "Option 2 - LPs",
        "Errors": [
          {
            "NextAction": "Option 2 - LPs",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Payments"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set FSS_Call_Disposition-Payments",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "Payment Advice",
        "Errors": [
          {
            "NextAction": "Payment Advice",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Default"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set FSS_Call_Disposition-Default",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "General advice",
        "Errors": [
          {
            "NextAction": "General advice",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Packaging"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set FSS_Call_Disposition-Packaging",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "Packaging Info advice",
        "Errors": [
          {
            "NextAction": "Packaging Info advice",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Account_Admin"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set FSS_Call_Disposition-Account_Admin",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "Account admin advice",
        "Errors": [
          {
            "NextAction": "Account admin advice",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "StoreInput": "False",
        "InputTimeLimitSeconds": "5",
        "Text": "$.Attributes.FSS_Opt2_IVR_Msg"
      },
      "Identifier": "Option 2 - LPs",
      "Type": "GetParticipantInput",
      "Transitions": {
        "NextAction": "Set FSS_Call_Disposition-Default",
        "Conditions": [
          {
            "NextAction": "Set FSS_Call_Disposition-Account_Admin",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "1"
              ]
            }
          },
          {
            "NextAction": "Set FSS_Call_Disposition-Packaging",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "2"
              ]
            }
          },
          {
            "NextAction": "Set FSS_Call_Disposition-Payments",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "3"
              ]
            }
          },
          {
            "NextAction": "Set FSS_Call_Disposition-Default",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "4"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Set FSS_Call_Disposition-Default",
            "ErrorType": "InputTimeLimitExceeded"
          },
          {
            "NextAction": "Set FSS_Call_Disposition-Default",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "Fallback transfer to agent message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Local_Authority"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set FSS_Call_Disposition",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "english queue",
        "Errors": [
          {
            "NextAction": "english queue",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Payment_Forced_Msg"
      },
      "Identifier": "Payment Advice",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "english queue",
        "Errors": [
          {
            "NextAction": "Fallback transfer to agent message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Default_Forced_Msg"
      },
      "Identifier": "General advice",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "english queue",
        "Errors": [
          {
            "NextAction": "Fallback transfer to agent message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Packaging_Forced_Msg"
      },
      "Identifier": "Packaging Info advice",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "english queue",
        "Errors": [
          {
            "NextAction": "Fallback transfer to agent message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Account_Forced_Msg"
      },
      "Identifier": "Account admin advice",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "english queue",
        "Errors": [
          {
            "NextAction": "Fallback transfer to agent message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "StoreInput": "False",
        "InputTimeLimitSeconds": "5",
        "Text": "$.Attributes.FSS_MainIVR_Msg"
      },
      "Identifier": "Main IVR",
      "Type": "GetParticipantInput",
      "Transitions": {
        "NextAction": "Set FSS_Call_Disposition-MainIVR_Opt2",
        "Conditions": [
          {
            "NextAction": "Set FSS_Call_Disposition",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "1"
              ]
            }
          },
          {
            "NextAction": "Set FSS_Call_Disposition-MainIVR_Opt2",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "2"
              ]
            }
          },
          {
            "NextAction": "Set FSS_Call_Disposition-Welsh",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "3"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Set FSS_Call_Disposition-MainIVR_Opt2",
            "ErrorType": "InputTimeLimitExceeded"
          },
          {
            "NextAction": "Set FSS_Call_Disposition-MainIVR_Opt2",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "Fallback transfer to agent message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "HoursOfOperationId": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/operating-hours/b6b8e46d-7dcf-4574-b242-06a89e77cb27"
      },
      "Identifier": "b3b50128-5b9c-40c6-a2f1-f636d46b2a02",
      "Type": "CheckHoursOfOperation",
      "Transitions": {
        "NextAction": "Error message",
        "Conditions": [
          {
            "NextAction": "FSS Welcome",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "True"
              ]
            }
          },
          {
            "NextAction": "ba86940c-9923-4059-862d-18379df883de",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "False"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Error message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "We will transfer to a member of our team who can help"
      },
      "Identifier": "Fallback transfer to agent message",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "english queue",
        "Errors": [
          {
            "NextAction": "english queue",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Welcome_Msg"
      },
      "Identifier": "FSS Welcome",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "Main IVR",
        "Errors": [
          {
            "NextAction": "Force compliance on lambda fail",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "Thank you for calling Extended Packaging Responsibilities Service, your details may be shared with local regulators and administrators. Calls are recorded for quality and training purposes"
      },
      "Identifier": "Force compliance on lambda fail",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "Fallback transfer to agent message",
        "Errors": [
          {
            "NextAction": "Fallback transfer to agent message",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.Metrics.Queue.Size"
      },
      "Identifier": "Check English Calls in Queue",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "Excess_Calls_English",
        "Conditions": [
          {
            "NextAction": "Set FFS Whisper flow",
            "Condition": {
              "Operator": "NumberLessOrEqualTo",
              "Operands": [
                "30"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Excess_Calls_English",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.Metrics.Queue.Size"
      },
      "Identifier": "Check calls in Welsh queue",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "Excess_Calls_Welsh",
        "Conditions": [
          {
            "NextAction": "Set FFS Whisper flow",
            "Condition": {
              "Operator": "NumberLessOrEqualTo",
              "Operands": [
                "10"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Excess_Calls_Welsh",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "EventHooks": {
          "AgentWhisper": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/contact-flow/1ba90de9-9b75-46ed-a807-002fb196ea4d"
        },
        "EventHooksConfiguration": {
          "AgentWhisper": {
            "DisableExecution": "false"
          }
        }
      },
      "Identifier": "Set FFS Whisper flow",
      "Type": "UpdateContactEventHooks",
      "Transitions": {
        "NextAction": "Set FSS queue flow",
        "Errors": [
          {
            "NextAction": "Set FSS queue flow",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "EventHooks": {
          "CustomerQueue": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/contact-flow/4704a449-dad3-4791-8165-376817029cae"
        }
      },
      "Identifier": "Set FSS queue flow",
      "Type": "UpdateContactEventHooks",
      "Transitions": {
        "NextAction": "05db0864-aa4f-41a1-8e10-791f327b4cb9",
        "Errors": [
          {
            "NextAction": "05db0864-aa4f-41a1-8e10-791f327b4cb9",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Excess_Calls_English"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Excess_Calls_English",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "Too many calls in queue",
        "Errors": [
          {
            "NextAction": "Too many calls in queue",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "FSS_Call_Disposition": "Excess_Calls_Welsh"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Excess_Calls_Welsh",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "Too many calls in queue",
        "Errors": [
          {
            "NextAction": "Too many calls in queue",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Excess_Call_Volume_Msg"
      },
      "Identifier": "Too many calls in queue",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "7212db89-b817-46e5-80e5-90aeaa69a136",
        "Errors": [
          {
            "NextAction": "If lambda error",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "QueueId": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/queue/f6e1563a-912c-4b1c-9e55-81028a5bbc63"
      },
      "Identifier": "welsh queue",
      "Type": "UpdateContactTargetQueue",
      "Transitions": {
        "NextAction": "b184ba3c-a10b-4fc9-9cdd-24fe99b565d4",
        "Errors": [
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "QueueId": "arn:aws:connect:eu-west-2:378989889082:instance/3f3879cf-bb5d-42d8-8498-1266a8055ea0/queue/56f3f8b3-9730-4a80-8db0-efc298161334"
      },
      "Identifier": "english queue",
      "Type": "UpdateContactTargetQueue",
      "Transitions": {
        "NextAction": "8cc941bc-32ce-43a3-b13e-d1ec3e3330c9",
        "Errors": [
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "MetricType": "NumberOfAgentsStaffed"
      },
      "Identifier": "8cc941bc-32ce-43a3-b13e-d1ec3e3330c9",
      "Type": "CheckMetricData",
      "Transitions": {
        "NextAction": "Not Staffed",
        "Conditions": [
          {
            "NextAction": "3d4c31a5-1ad4-441f-bcd8-dd63b396987f",
            "Condition": {
              "Operator": "NumberGreaterThan",
              "Operands": [
                "0"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "3d4c31a5-1ad4-441f-bcd8-dd63b396987f",
      "Type": "GetMetricData",
      "Transitions": {
        "NextAction": "Check English Calls in Queue",
        "Errors": [
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "MetricType": "NumberOfAgentsStaffed"
      },
      "Identifier": "b184ba3c-a10b-4fc9-9cdd-24fe99b565d4",
      "Type": "CheckMetricData",
      "Transitions": {
        "NextAction": "Not Staffed",
        "Conditions": [
          {
            "NextAction": "56505620-d29f-45a2-b7d7-6a8ae3960408",
            "Condition": {
              "Operator": "NumberGreaterThan",
              "Operands": [
                "0"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "56505620-d29f-45a2-b7d7-6a8ae3960408",
      "Type": "GetMetricData",
      "Transitions": {
        "NextAction": "Check calls in Welsh queue",
        "Errors": [
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "05db0864-aa4f-41a1-8e10-791f327b4cb9",
      "Type": "TransferContactToQueue",
      "Transitions": {
        "NextAction": "Not Staffed",
        "Errors": [
          {
            "NextAction": "Not Staffed",
            "ErrorType": "QueueAtCapacity"
          },
          {
            "NextAction": "Not Staffed",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "We are sorry, there seems to be a problem and we are unable to take your call right now. You can find information about extended packaging responsibity at gov.uk. Otherwise, we thank you for your patience, and request you call back later."
      },
      "Identifier": "If lambda error",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "7212db89-b817-46e5-80e5-90aeaa69a136",
        "Errors": [
          {
            "NextAction": "7212db89-b817-46e5-80e5-90aeaa69a136",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "7212db89-b817-46e5-80e5-90aeaa69a136",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "Text": "$.Attributes.FSS_Error_Msg"
      },
      "Identifier": "Not Staffed",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "7212db89-b817-46e5-80e5-90aeaa69a136",
        "Errors": [
          {
            "NextAction": "If lambda error",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}